<Patch>
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>Horses (1.0)</li>
		</mods>
		<match Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationAdd">
					<!--Graphics-->
					<xpath>Defs/ThingDef[defName="Human"]/alienRace/generalSettings/alienPartGenerator/bodyAddons</xpath>
					<value>
						<li>
							<path>Parts/None/None</path>
							<bodyPart>Jaw</bodyPart>
							<inFrontOfBody>true</inFrontOfBody>
							<hediffGraphics>
								<EtherHorseSnout>Parts/horseface/horseface</EtherHorseSnout>
							</hediffGraphics>
							<layerOffset>-0.271</layerOffset>
							<offsets>
								<south>
									<bodyTypes>
										<Male>(-0.39,0.34)</Male>
										<Female>(-0.39,0.34)</Female>
										<Fat>(-0.39,0.34)</Fat>
										<Thin>(-0.39,0.34)</Thin>
										<Hulk>(-0.39,0.34)</Hulk>
									</bodyTypes>
									<crownTypes>
										<Normal_Average>(-0.42,0.47)</Normal_Average>
									</crownTypes>
								</south>
								<north>
									<bodyTypes>
										<Male>(0,0)</Male>
										<Female>(0,0)</Female>
									</bodyTypes>
									<crownTypes>
										<Normal_Average>(0,0)</Normal_Average>
									</crownTypes>
								</north>
								<east>
									<bodyTypes>
										<Male>(-0.78,0.44)</Male>
										<Female>(-0.78,0.44)</Female>
										<Fat>(-0.78,0.44)</Fat>
										<Thin>(-0.78,0.44)</Thin>
										<Hulk>(-0.78,0.44)</Hulk>
									</bodyTypes>
									<crownTypes>
										<Normal_Average>(-0.59,0.40)</Normal_Average>
									</crownTypes>
								</east>
							</offsets>
						</li>
						<li>
							<path>Parts/None/None</path>
							<bodyPart>Ear</bodyPart>
							<inFrontOfBody>true</inFrontOfBody>
							<hediffGraphics>
								<EtherHorseEar>Parts/horseface/horseears</EtherHorseEar>
							</hediffGraphics>
							<layerOffset>-0.24</layerOffset>
							<offsets>
								<south>
									<bodyTypes>
										<Male>(-0.39,0.73)</Male>
										<Female>(-0.39,0.73)</Female>
										<Fat>(-0.39,0.73)</Fat>
										<Thin>(-0.39,0.73)</Thin>
										<Hulk>(-0.39,0.73)</Hulk>
									</bodyTypes>
									<crownTypes>
										<Normal_Average>(-0.42,0.63)</Normal_Average>
									</crownTypes>
								</south>
								<north>
									<bodyTypes>
										<Male>(0,1)</Male>
										<Female>(0,1)</Female>
										<Fat>(0,1)</Fat>
										<Thin>(0,1)</Thin>
										<Hulk>(0,1)</Hulk>
									</bodyTypes>
									<crownTypes>
										<Normal_Average>(0,1)</Normal_Average>
									</crownTypes>
								</north>
								<east>
									<bodyTypes>
										<Male>(-0.57,0.83)</Male>
										<Female>(-0.57,0.83)</Female>
										<Fat>(-0.57,0.83)</Fat>
										<Thin>(-0.57,0.83)</Thin>
										<Hulk>(-0.57,0.83)</Hulk>
									</bodyTypes>
									<crownTypes>
										<Normal_Average>(-0.45,0.65)</Normal_Average>
									</crownTypes>
								</east>
							</offsets>
						</li>
						<li>
							<path>Parts/None/None</path>
							<bodyPart>Tail</bodyPart>
							<inFrontOfBody>true</inFrontOfBody>
							<hediffGraphics>
								<EtherHorseTail>Parts/horseface/horsetail</EtherHorseTail>
							</hediffGraphics>
							<layerOffset>-0.33</layerOffset>
							<offsets>
								<south>
									<bodyTypes>
										<Male>(0,0)</Male>
										<Female>(0,0)</Female>
									</bodyTypes>
									<crownTypes>
										<Normal_Average>(0,0)</Normal_Average>
									</crownTypes>
								</south>
								<north>
									<bodyTypes>
										<Male>(-0.04,0.04)</Male>
										<Female>(-0.04,0.04)</Female>
										<Fat>(-0.04,0.04)</Fat>
										<Thin>(-0.04,0.04)</Thin>
										<Hulk>(-0.04,0.04)</Hulk>
									</bodyTypes>
									<crownTypes>
										<Normal_Average>(0,0.04)</Normal_Average>
									</crownTypes>
								</north>
								<east>
									<bodyTypes>
										<Male>(-0.22,-0.22)</Male>
										<Female>(-0.16,-0.12)</Female>
										<Fat>(0,-0.21)</Fat>
										<Thin>(-0.24,-0.21)</Thin>
										<Hulk>(0.04,-0.28)</Hulk>
									</bodyTypes>
									<crownTypes>
										<Normal_Average>(-0.45,0.65)</Normal_Average>
									</crownTypes>
								</east>
							</offsets>
							<drawnInBed>false</drawnInBed>
						</li>		
					</value>
				</li>
				
				<!--Hediffs-->
				<li Class="PatchOperationAdd">
					<xpath>Defs</xpath>
					<value>
						<!--Morph Def-->
						<Pawnmorph.MorphDef ParentName="SensitiveFoodMorph">
							<defName>HorseMorph</defName>
							<label>horse morph</label>
							<race>QuarterHorse</race>
							<categories>
								<li>bovine</li>
								<li>farm</li>
							</categories>
						</Pawnmorph.MorphDef>
						
						<!--Morph Reaction-->
						<ThoughtDef>
							<defName>EtherReactionHorseTF</defName>
							<workerClass>ThoughtWorker_Hediff</workerClass>
							<hediff>PawnmorphHorseTF</hediff>
							<stages>
								<li>
									<label>changed</label>
									<description>N...neigh!?</description>
									<baseMoodEffect>-3</baseMoodEffect>
								</li>
								<li>
									<label>feeling odd</label>
									<description>I feel like I should be pulling a plough...or galloping across a steppe.</description>
									<baseMoodEffect>-5</baseMoodEffect>
								</li>
							</stages>
						</ThoughtDef>
						
						<!--Full Morph-->
						<HediffDef ParentName="MorphParent">
							<defName>PawnmorphHorseTF</defName>
							<label>horseMorph</label>
							<stages>
								<li>
									<label>reeling</label>
									<hungerRateFactor>1.6</hungerRateFactor>
									<painOffset>0.05</painOffset>
									<capMods>
										<li>
											<capacity>Moving</capacity>
											<offset>-0.05</offset>
										</li>
									</capMods>
									<hediffGivers>
										<li Class="Pawnmorph.HediffGiver_TF">
											<hediff>TransformedHuman</hediff>
											<pawnkinds>
												<li>QuarterHorse</li>
												<li>BlackHorse</li>
												<li>WhiteHorse</li>
												<li>Palomino</li>
											</pawnkinds>
											<tale>TransformationMisc</tale>
										</li>
									</hediffGivers>
								</li>
								<li>
									<label>transforming</label>
									<minSeverity>0.6</minSeverity>
									<painOffset>0.1</painOffset>
									<vomitMtbDays>1</vomitMtbDays>
									<capMods>
										<li>
											<capacity>Moving</capacity>
											<offset>-0.05</offset>
										</li>
										<li>
											<capacity>Sight</capacity>
											<offset>-0.05</offset>
										</li>
										<li>
											<capacity>Manipulation</capacity>
											<offset>-0.05</offset>
										</li>
									</capMods>
								</li>
								<li>
									<label>changing</label>
									<minSeverity>0.65</minSeverity>
									<painOffset>0.1</painOffset>
									<vomitMtbDays>1</vomitMtbDays>
									<capMods>
										<li>
											<capacity>Moving</capacity>
											<offset>-0.05</offset>
										</li>
										<li>
											<capacity>Sight</capacity>
											<offset>-0.05</offset>
										</li>
										<li>
											<capacity>Manipulation</capacity>
											<offset>-0.05</offset>
										</li>
									</capMods>
									<hediffGivers>
										<li Class="Pawnmorph.HediffGiver_Mutation">
											<hediff>EtherHorseSnout</hediff>
											<mtbDays>0.5</mtbDays>
											<partsToAffect>
												<li>Jaw</li>
											</partsToAffect>
										</li>
										<li Class="Pawnmorph.HediffGiver_Mutation">
											<hediff>EtherHorseEar</hediff>
											<mtbDays>1</mtbDays>
											<partsToAffect>
												<li>Ear</li>
											</partsToAffect>
											<countToAffect>2</countToAffect>
										</li>
										<li Class="Pawnmorph.HediffGiver_Mutation">
											<hediff>EtherHorseTail</hediff>
											<mtbDays>1</mtbDays>
											<partsToAffect>
												<li>Tail</li>
											</partsToAffect>
											<tale>GrewTail</tale>
										</li>
										<li Class="Pawnmorph.HediffGiver_Mutation">
											<hediff>EtherHideLimb</hediff>
											<mtbDays>2</mtbDays>
											<partsToAffect>
												<li>Arm</li>
											</partsToAffect>
											<countToAffect>2</countToAffect>
										</li>
										<li Class="Pawnmorph.HediffGiver_Mutation">
											<hediff>EtherHoofHand</hediff>
											<mtbDays>3</mtbDays>
											<chance>5</chance>
											<partsToAffect>
												<li>Hand</li>
											</partsToAffect>
											<countToAffect>2</countToAffect>
										</li>
										<li Class="Pawnmorph.HediffGiver_Mutation">
											<hediff>EtherDigitigradeLeg</hediff>
											<mtbDays>2</mtbDays>
											<partsToAffect>
												<li>Leg</li>
											</partsToAffect>
											<countToAffect>2</countToAffect>
										</li>
										<li Class="Pawnmorph.HediffGiver_Mutation">
											<hediff>EtherUnclovenHoofFoot</hediff>
											<mtbDays>3</mtbDays>
											<partsToAffect>
												<li>Foot</li>
											</partsToAffect>
											<countToAffect>2</countToAffect>
										</li>
									</hediffGivers>
								</li>
							</stages>
						</HediffDef>
						
						<!--Partial Morph-->
						<HediffDef ParentName="MorphParent">
							<defName>PawnmorphHorseTFPartial</defName>
							<label>horseMorph partial</label>
							<stages>
								<li>
									<painOffset>0.1</painOffset>
									<vomitMtbDays>1</vomitMtbDays>
									<capMods>
										<li>
											<capacity>Moving</capacity>
											<offset>-0.05</offset>
										</li>
										<li>
											<capacity>Sight</capacity>
											<offset>-0.05</offset>
										</li>
										<li>
											<capacity>Manipulation</capacity>
											<offset>-0.05</offset>
										</li>
									</capMods>
									<hediffGivers>
										<li Class="Pawnmorph.HediffGiver_Mutation">
											<hediff>EtherHorseSnout</hediff>
											<mtbDays>0.5</mtbDays>
											<partsToAffect>
												<li>Jaw</li>
											</partsToAffect>
										</li>
										<li Class="Pawnmorph.HediffGiver_Mutation">
											<hediff>EtherHorseEar</hediff>
											<mtbDays>0.5</mtbDays>
											<partsToAffect>
												<li>Ear</li>
											</partsToAffect>
											<countToAffect>2</countToAffect>
										</li>
										<li Class="Pawnmorph.HediffGiver_Mutation">
											<hediff>EtherHorseTail</hediff>
											<mtbDays>0.5</mtbDays>
											<partsToAffect>
												<li>Tail</li>
											</partsToAffect>
											<tale>GrewTail</tale>
										</li>
										<li Class="Pawnmorph.HediffGiver_Mutation">
											<hediff>EtherHideLimb</hediff>
											<mtbDays>0.5</mtbDays>
											<partsToAffect>
												<li>Arm</li>
											</partsToAffect>
											<countToAffect>2</countToAffect>
										</li>
										<li Class="Pawnmorph.HediffGiver_Mutation">
											<hediff>EtherDigitigradeLeg</hediff>
											<mtbDays>0.5</mtbDays>
											<partsToAffect>
												<li>Leg</li>
											</partsToAffect>
											<countToAffect>2</countToAffect>
										</li>
										<li Class="Pawnmorph.HediffGiver_Mutation">
											<hediff>EtherUnclovenHoofFoot</hediff>
											<mtbDays>0.5</mtbDays>
											<partsToAffect>
												<li>Foot</li>
											</partsToAffect>
											<countToAffect>2</countToAffect>
										</li>
									</hediffGivers>
								</li>
							</stages>
						</HediffDef>
						
						<!--Morph Parts-->
						<HediffDef Name="HorsePart" ParentName="PawnmorphPart" Abstract="True">
							<comps>
								<li Class="Pawnmorph.Hediffs.CompProperties_MorphInfluence">
									<morph>HorseMorph</morph>
								</li>
							</comps>
						</HediffDef>
						<HediffDef ParentName="HorsePart">
							<defName>EtherHorseSnout</defName>
							<label>equine snout</label>
							<description>A snout graces [PAWN_nameDef]'s face, like that of a horse. [PAWN_pronoun] teeth are squared off, and this makes speaking more difficult, yet eating is easier.</description>
							<stages>
								<li>
									<capMods>
										<li>
											<capacity>Talking</capacity>
											<offset>-0.40</offset>
										</li>
										<li>
											<capacity>Eating</capacity>
											<offset>0.40</offset>
										</li>
									</capMods>
								</li>
							</stages>
							<comps>
								<li Class="HediffCompProperties_VerbGiver">
									<tools>
										<li>
											<label>teeth</label>
											<labelUsedInLogging>False</labelUsedInLogging>
											<capacities>
												<li>Bite</li>
											</capacities>
											<power>7.0</power>
											<cooldownTime>1.5</cooldownTime>
											<alwaysTreatAsWeapon>true</alwaysTreatAsWeapon>
										</li>
									</tools>
								</li>
							</comps>
						</HediffDef>
						<HediffDef ParentName="HorsePart">
							<defName>EtherHorseEar</defName>
							<label>equine</label>
							<stages>
								<li>
									<capMods>
										<li>
											<capacity>Hearing</capacity>
											<offset>0.1</offset>
										</li>
									</capMods>
								</li>
							</stages>
						</HediffDef>
						<HediffDef ParentName="HorsePart">
							<defName>EtherHorseTail</defName>
							<label>horse tail</label>
							<description>A horselike tail. It swats at flies occasionally.</description>
							<stages>
								<li>
									<capMods>
										<li>
											<capacity>Moving</capacity>
											<offset>0.01</offset>
										</li>
									</capMods>
								</li>
							</stages>
						</HediffDef>
						
						<!--Morph Injector-->
						<ThingDef ParentName="InjectorBase">
							<defName>HorseTransformer</defName>
							<label>mutasyringe, horse</label>
							<description>A mutagenic injector filled with mechanites and horse DNA. Use with caution, as leaving the mechanites unchecked may transform the user.</description>
							<graphicData>
								<texPath>Things/Item/Drug/Specific</texPath>
								<graphicClass>Graphic_Single</graphicClass>
							</graphicData>
							<ingestible>
								<drugCategory>Medical</drugCategory>
								<outcomeDoers>
									<li Class="Pawnmorph.IngestionOutcomeDoer_GiveHediffRandom">
										<hediffDefs>
											<li>PawnmorphHorseTF</li>
										</hediffDefs>
										<severity>1.00</severity>
									</li>
								</outcomeDoers>
							</ingestible>	
						</ThingDef>
					</value>				
				</li>
				<li Class="PatchOperationAdd">
					<success>Always</success>
					<xpath>Defs/ThingDef[defName="RandomTransformer"]/ingestible/outcomeDoers/li/hediffDefs</xpath>
					<value>
						<li>PawnmorphHorseTF</li>
					</value>
				</li>
				<li Class="PatchOperationAdd">
					<success>Always</success>
					<xpath>Defs/ThingDef[defName="RandomProductionTransformer"]/ingestible/outcomeDoers/li/hediffDefs</xpath>
					<value>
						<li>PawnmorphHorseTF</li>
					</value>
				</li>
				<li Class="PatchOperationAdd">
					<success>Always</success>
					<xpath>Defs/HediffDef[defName="PawnmorphGunshotTF"]/stages/outcomeDoers[first()]/pawnkinds</xpath>
					<value>
						<li>QuarterHorse</li>
						<li>BlackHorse</li>
						<li>WhiteHorse</li>
						<li>Palomino</li>
					</value>
				</li>
			</operations>
		</match>
	</Operation>
</Patch>